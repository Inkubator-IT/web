generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Tag {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  projects ProjectTag[]
  blogs    BlogTag[]

  @@map("tags")
}

model TechStack {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  projects ProjectTechStack[]

  @@map("tech_stacks")
}

model Service {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("services")
}

model Project {
  id           Int      @id @default(autoincrement())
  title        String
  description  String
  owner        String
  url          String?
  testimonial  String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  tags        ProjectTag[]
  techStacks  ProjectTechStack[]

  @@map("projects")
}

model Blog {
  id          Int      @id @default(autoincrement())
  title       String
  author      String
  slug        String   @unique
  excerpt     String?
  thumbnail   String?
  content     String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  tags BlogTag[]

  @@map("blogs")
}

model ClientInfo {
  id                    Int      @id @default(autoincrement())
  namaLengkap           String
  email                 String
  noWhatsapp            String
  instansi              String?
  civitasItb            Boolean   @default(false)
  jenisProyek           String
  tujuanPembuatanProyek String
  deskripsiProyek       String
  ekspetasiBiaya        String?
  deadlineProyek       String?
  sudahMemilikiDesain   Boolean   @default(false)
  pertanyaanProyek     String?
  dimanaMengetahuiIit   String?
  ratingWebsite         Int?
  masukanWebsite        String?
  kodePromo             String?
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("client_infos")
}

model ProjectTag {
  projectId Int
  tagId     Int

  project Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  tag     Tag     @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@id([projectId, tagId])
  @@map("project_tags")
}

model ProjectTechStack {
  projectId   Int
  techStackId Int

  project   Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
  techStack TechStack @relation(fields: [techStackId], references: [id], onDelete: Cascade)

  @@id([projectId, techStackId])
  @@map("project_tech_stacks")
}

model BlogTag {
  blogId Int
  tagId  Int

  blog Blog @relation(fields: [blogId], references: [id], onDelete: Cascade)
  tag  Tag  @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@id([blogId, tagId])
  @@map("blog_tags")
}
